<div class="login-container">
  <div class="login-card">
    <div class="login-header">
      <div class="login-icon">
        <i class="bi bi-shield-lock-fill"></i>
      </div>
      <h2>Administration</h2>
      <p class="text-muted">Connexion Administrateur</p>
    </div>

    @if (message) {
      <div class="alert" [ngClass]="{
        'alert-success': message.includes('succès') || message.includes('réussie'),
        'alert-danger': !message.includes('succès') && !message.includes('réussie'),
      }">
        <i class="bi" [ngClass]="{
          'bi-check-circle': message.includes('succès') || message.includes('réussie'),
          'bi-exclamation-circle': !message.includes('succès') && !message.includes('réussie')
        }"></i>
        {{ message }}
      </div>
    }

    <form (submit)="login(); $event.preventDefault()" class="login-form">
      <div class="mb-3">
        <label class="form-label">Nom d'utilisateur</label>
        <div class="input-group">
          <span class="input-group-text">
            <i class="bi bi-person"></i>
          </span>
          <input
            type="text"
            class="form-control"
            placeholder="Entrez votre nom d'utilisateur"
            [(ngModel)]="loginData.username"
            name="username"
            required
            autocomplete="username"
          />
        </div>
      </div>

      <div class="mb-4">
        <label class="form-label">Mot de passe</label>
        <div class="input-group">
          <span class="input-group-text">
            <i class="bi bi-lock"></i>
          </span>
          <input
            [type]="showLoginPassword ? 'text' : 'password'"
            class="form-control"
            placeholder="Entrez votre mot de passe"
            [(ngModel)]="loginData.password"
            name="password"
            required
            autocomplete="current-password"
          />
          <button
            type="button"
            class="btn btn-outline-secondary"
            (click)="showLoginPassword = !showLoginPassword"
          >
            <i class="bi" [class.bi-eye]="!showLoginPassword" [class.bi-eye-slash]="showLoginPassword"></i>
          </button>
        </div>
      </div>

      <button
        type="submit"
        class="btn btn-primary w-100"
        [disabled]="isLoading"
      >
        @if (isLoading) {
          <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
          Connexion en cours...
        } @else {
          <i class="bi bi-box-arrow-in-right me-2"></i>Se connecter
        }
      </button>
    </form>

    <div class="login-footer">
      <a routerLink="/" class="text-decoration-none">
        <i class="bi bi-arrow-left me-2"></i>Retour au site
      </a>
    </div>
  </div>
</div>
